{% extends 'layout\mycgv_layout.html' %}

{% block head_mycgv %}
{% endblock %}

{% block body_main_mycgv %}

<div>
    <h4>예매 내역</h4>
  </div>

  <table class="table" style="border-bottom: 20px;">
      <thead class="table-group-divider">
        <tr>
          <th scope="col">예매 NO</th>
          <th scope="col">예매일자</th>
          <th scope="col">총관람인원</th>
          <th scope="col">총구매 금액</th>
          <th scope="col">예매 취소여부</th>
        </tr>
      </thead>
  
      <tbody >
          {% for a_ticket in Ticket %}
          <tr>
          <td><a href="/user/mycgv/myticket/detail?no={{a_ticket.ticket_no}}">{{a_ticket.ticket_no}}</a></td>
          <td>{{a_ticket.ticket_date}}</td>
          <td>{{a_ticket.ticket_totalcnt}}</td>
          <td>{{a_ticket.ticket_totalprice}}</td>
          {% if a_ticket.ticket_cancelflag == 0 %}
          <td>예매유지 상태</td>
          {% elif a_ticket.ticket_cancelflag == 1 %}
          <td>예매취소</td>
          {% endif %}
          </tr>
        {% empty %}
          <tr>
            <td colspan="5" align="center" >예매내역이 없습니다.</td>
          </tr>
        {% endfor %}  
      </tbody>
    </table>





    <div style="text-align: center; margin-top: 10px;">
      <!-- 첫페이지 이전페이지 -->
      {% if Ticket.has_previous %}  <!-- 이전이 있으면 true -->
          <a href="/user/mycgv/ticket=1">[&lt;&lt;]</a>
          <a href="/user/mycgv/ticket?page={{ Ticket.previous_page_number}}">[&lt;]</a>
      {% else %}
          [&lt;&lt;]
          [&lt;]
      {% endif %}


      <!-- 숫자창 -->
      {% for page_number in Ticket.paginator.page_range %}
          {% if start_page <= page_number and end_page >= page_number %}
              {% if page_number == Ticket.number %}
                  <span style="font-weight: bolder; color: black;">[{{ page_number }}]</span>
              {% else %}
                  <a href="/user/mycgv/ticket?page={{page_number}}">[{{ page_number }}]</a>
                  <input type="hidden" name = 'search' value="{{search}}" >
              {% endif %}
          {% endif %}
      {% endfor %}


      <!-- 마지막페이지 다음페이지 -->
      {% if Ticket.has_next %}<!-- 이후가 있으면 true -->
          <a href="/user/mycgv/ticket?page={{ payment.next_page_number}}">[&gt;]</a>
          <a href="/user/mycgv/ticket?page={{last_page}}">[&gt;&gt;]</a>
      {% else %}
          [&gt;]
          [&gt;&gt;]
      {% endif %}
  </div> 


{% endblock %}


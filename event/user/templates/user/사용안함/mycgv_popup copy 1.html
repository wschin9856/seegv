<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


    <style type="text/css">
        .hidden {
            display: none;
        };

 
    </style>



</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <h3>모달연습</h3>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
        자주가는cgv 설정하기
    </button>
    
    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h1 class="modal-title fs-5" id="staticBackdropLabel">자주가는cgv</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

        <form>
            <div>
                영화관을 선택하여 등록해주세요. 최대 5개까지 등록하실 수 있습니다
            </div>
            <fieldset>
                <legend>선택창</legend>
                <select id="select_region"  title="자주가는 지역선택">
                    <option value selected="selected">지역선택</option>
                    {% for r in region %}                    
                        <option value="{{r.no}}">{{r.name}}</option>
                    {% endfor %} 
                    </optgroup>
                </select>
                <select id="select_theater" title="자주가는 CGV선택" onchange="javascript:Handler()">
                    <option name = "sel" value="select" selected="selected">극장선택</option>
                    {% for t in theater %}                    
                        <option id="{{t.no}}" name = "select_theater" value='{"r":{{t.Region_no_id}},"t":{{t.no}}}' class="">{{t.name}}</option>
                    {% endfor %} 
 
                </select>              
                    <button id="btn_add_favorite_theater" type="button"><span>자주가는 CGV 추가</span></button>
                </fieldset>

        </form>



            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
            <button type="button" class="btn btn-primary">추가하기</button>
            </div>
        </div>
        </div>
    </div>



    
    <script type="text/javascript">



        ///////////////////////////hidden을 이용한 방식
        const select_region = document.getElementById('select_region');
        const select_theater = document.getElementById('select_theater');
        const thList = document.getElementsByName("select_theater");


        // console.log(a); // map 타입으로 작성했지만 str타입으로 넘어온다
        // aa= JSON.parse(a) // HTML 에서 javascript로 넘어올때는 str로 넘어온다 그럴떄 JSON.parse를 통해 문자열을 객체로 반환
        


        const Handler = (event) => {
  
            for(let i=0; i < thList.length; i++){
                const thvalue = thList[i].value
                if(JSON.parse(thvalue)['r']== select_region.value){
                    thList[i].className = ("");}
                else{
                    thList[i].className = ("hidden");
                }
        };
    };
        select_region.onchange = Handler;








    // const thArr = Array.from(document.querySelectorAll("select_theater>option"))
    // const select_region = document.getElementById('select_region');
    // const select_theater = document.getElementById('select_theater');        
    // const thList = document.getElementsByName("select_theater");

    // console.log(select_theater[2])
    // const Handler = (event) => {
    //     select_theater.innerHTML="";
    //     // select_theater.innerHTML = 
    //     a = "<option value selected='selected'>극장선택</option>";


    //     for(let i=0; i < thList.length; i++){
    //             const thvalue = thList[i].value
    //             if(JSON.parse(thvalue)['r']== select_region.value){
    //                 select_theater.innerHTML="";
    //                 a = a + <option id= "thvalue.id" name = "select_theater" value='thvalue.value' >thvalue.name</option>
                   

    //             };
    //         };     
            
    //     select_theater.innerHTML = a    
    //     };

        


        
    // select_region.onchange = Handler;
    
    </script>



























</body>
</html>
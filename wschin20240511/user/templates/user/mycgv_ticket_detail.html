{% extends 'layout\mycgv_layout.html' %}

{% block head_mycgv %}
{% endblock %}



<script type="text/javascript">
  // 서버에서 받은  데이터 변환 추출
  var imsi1 = "{{ticket_arr}}";
  console.log("imsi1");
  console.log(imsi1);

  const ticket_arr = JSON.parse(unescapeHtml(imsi1));
  // const ticket_arr = unescapeHtml(imsi1);
  console.log("ticket_arr");
  console.log(ticket_arr);
        
  function unescapeHtml(str) {
      if (str == null) {
      return "";
      }
      return str
      .replace(/&amp;/g, '&')
      .replace(/&lt;/g, '<')
      .replace(/&gt;/g, '>')
      .replace(/&quot;/g, '"')
      .replace(/&#039;/g, "'")
      .replace(/&#39;/g, "'");
  }

</script>



{% block body_main_mycgv %}

<div>
    <h4>예매 상세내역2</h4>
  </div>

  <table class="table" style="border-bottom: 20px;">
      <thead class="table-group-divider">
        <tr>  
          <th scope="col">예매 NO : {{ticket_dict.ticket_no}} </th>
        
        <tr>  
          <th scope="col">예매일자 : {{ticket_dict.ticket_date}}</th>
        </tr>
          <th scope="col">총관람인원</th>
          <th scope="col">총구매 금액</th>
          <th scope="col">예매 취소여부</th>
        
      </thead>
  
      <tbody >
        
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        
      </tbody>
    </table>





    <div style="text-align: center; margin-top: 10px;">
      <!-- 첫페이지 이전페이지 -->
      {% if Ticket.has_previous %}  <!-- 이전이 있으면 true -->
          <a href="/user/mycgv/ticket=1">[&lt;&lt;]</a>
          <a href="/user/mycgv/ticket?page={{ Ticket.previous_page_number}}">[&lt;]</a>
      {% else %}
          [&lt;&lt;]
          [&lt;]
      {% endif %}


      <!-- 숫자창 -->
      {% for page_number in Ticket.paginator.page_range %}
          {% if start_page <= page_number and end_page >= page_number %}
              {% if page_number == Ticket.number %}
                  <span style="font-weight: bolder; color: black;">[{{ page_number }}]</span>
              {% else %}
                  <a href="/user/mycgv/ticket?page={{page_number}}">[{{ page_number }}]</a>
                  <input type="hidden" name = 'search' value="{{search}}" >
              {% endif %}
          {% endif %}
      {% endfor %}


      <!-- 마지막페이지 다음페이지 -->
      {% if Ticket.has_next %}<!-- 이후가 있으면 true -->
          <a href="/user/mycgv/ticket?page={{ payment.next_page_number}}">[&gt;]</a>
          <a href="/user/mycgv/ticket?page={{last_page}}">[&gt;&gt;]</a>
      {% else %}
          [&gt;]
          [&gt;&gt;]
      {% endif %}
  </div> 


{% endblock %}

